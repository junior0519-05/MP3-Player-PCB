//Necessary Libraries for MP3 Player
#include "Arduino.h"
#include "DFRobotDFPlayerMini.h"
#include <U8g2lib.h> //include graphics library for display
#include <RTClib.h> //include library for real time clock
#include <cstdlib>


//Pick which core FreeRTOS will run on based on device that's used

#if CONFIG_FREERTOS_UNICORE //single core device

  static const BaseType_t app_cpu = 0;

#else //dual core device

  static const BaseType_t app_cpu = 1;

#endif


  // Define GPIO pins for UART communcation //
 // RX (ESP32) => TX On Df Mini Player    //
// TX (ESP32) => RX on Df Mini Player   //

#define RX 3 //GPIO3
#define TX 4 //GPIO4

// DF Mini Player communicated via UART 1 on ESP32
#define FPSerial Serial1 

U8G2_SH1107_SEEED_128X128_F_HW_I2C u8g2(U8G2_R0, U8X8_PIN_NONE); //Declaration for display of use with u8g2 library
RTC_DS3231 realTimeClock; //creates object for rtc(real time clock) functionality


int getTime();
void drawMP3UIMain();

DFRobotDFPlayerMini myDFPlayer;

// Pin Declarations for buttons along with their status //

int buttonOnePin = 7, //All pins in GPIO
    buttonTwoPin = 8,
    buttonThreePin = 9,
    buttonOneStatus,
    buttonTwoStatus,
    buttonThreeStatus;


// Variables that hold time information //
int year,
      month,
      day,
      hour,
      minutes,
      seconds,
      convertedHour;

String AMorPM; 

// This 2D array holds the selection frames for our UI options
// there's 6 rows and 4 columns

const int selectFrame[6][4]{

  {25, 112, 22, 13}, //frame for rewind button
  {55, 111, 17, 15}, //frame for pause button
  {80, 112, 22, 13}, //frame for forward button
  {108, 53, 17, 15}, //frame for volume button
  {108, 37, 17, 15}, //frame for shuffle music button
  {108, 21, 17, 15}  //frame for loop song button

};


// Number of features MP3 Has //

const int numItems = 6;

// Variables that handle selection corresponding to button presses //
int selectedItem = 0,          
    selectedItemPrevious,    
    selectedItemNext,
    buttonRightClicked,
    buttonLeftClicked;

// Variables that deal with current time of song playing //

int songStartTime = 0,
    currentSongTime = 0,
    convertedSongTime,
    minuteCoversion,
    secondConversion,
    timeAfterPause = 0;  //this variable is going to hold the time before you pause


// Chars used for formatting UI of MP3 //

char screenTime[6]; // MM:SS format for time
char timeOfDay[14]; // time of day in HH:MM:SS
char amOrPM[6]; // time of day in HH:MM:SS
char currentDate[14]; // current date MM/DD/YYYY 
char currentTrackNum[14];
char totalTrackNum[8];
char currentVolume[4];


// Boolean Variables that act as toggle for features on device //

bool volToggle = false; // Volume toggle initialized at false because when turned on volume is not automatically selected 

bool loopToggle = false;

bool loopfuncToggle = false;

bool shuffleToggle = false;

bool playStatus;

// Variables that deal with everything track related (shuffle, repeating, normal playing) //
int currentTrackNumber,
    totalTracks,
    randomTrack,
    lastRandomTrack,
    rewindTrack, //varaible for keeping track of last random number that was generated
    tempTrack,
    tempTotal;

// Variables that deal with volume control of the device //
int volume = 15; //intitial volume 
float barHeight = 19.0; //variable to set height of volume bar

//variables that manage status of MP3 Player

int readDFPlayer,
   currentEvent;


// BitMaps that create Background //

static const unsigned char image_download_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x00,0x03,0x06,0x00,0x0d,0x1a,0x00,0x31,0x62,0x00,0xc1,0x82,0x01,0x31,0x62,0x00,0x0d,0x1a,0x00,0x03,0x06,0x00,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
static const unsigned char image_Layer_1_bits[] U8X8_PROGMEM = {};
static const unsigned char image_Layer_13_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x19,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x32,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x65,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xb0,0xca,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x95,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x2b,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xcc,0x57,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xec,0x2f,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe6,0x5c,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x72,0xb8,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x73,0x50,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x33,0xa0,0xc2,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x33,0x40,0x85,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x3b,0x80,0x0a,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x8c,0x1b,0x00,0x15,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x84,0x19,0x80,0x2a,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x86,0x19,0x00,0x55,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x83,0x19,0x00,0x2a,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x81,0x18,0x00,0x55,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xc0,0x1c,0x00,0xaa,0xc0,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x40,0x1e,0x00,0x54,0x80,0x01,0x00,0x80,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x20,0x0e,0x00,0xa8,0x00,0x03,0x00,0x80,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x20,0x0e,0x00,0x50,0x01,0x06,0x00,0xc0,0x1f,0x00,0x00,0x00,0x00,0x00,0x02,0x0e,0x10,0x0f,0x00,0xa0,0x02,0x0c,0x00,0xe0,0x3e,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x88,0x07,0x00,0x40,0x01,0x18,0x00,0xe0,0x78,0x00,0x00,0x00,0x00,0x80,0x9f,0x03,0x84,0x03,0x00,0x80,0x02,0x30,0x00,0x70,0x68,0x00,0x00,0x00,0x00,0xc0,0xdf,0x01,0xc6,0x03,0x00,0x00,0x05,0xe0,0x00,0x38,0xd0,0x00,0x00,0x00,0x00,0xe0,0xff,0x00,0xc3,0x01,0x00,0x00,0x0a,0xe0,0x03,0x1c,0xb0,0x00,0x00,0x00,0x00,0xf8,0x3f,0x80,0xc1,0x01,0x00,0x00,0x04,0xc0,0x1e,0x0e,0x50,0x01,0x00,0x00,0x00,0xfc,0x1f,0xc0,0xf0,0x01,0x00,0x00,0x08,0x80,0x7d,0x07,0xa0,0x06,0x00,0x00,0xc0,0xff,0x1f,0xf0,0xf8,0x00,0x00,0x00,0x10,0x80,0xcb,0x01,0x40,0x0d,0x00,0x00,0xfc,0xff,0x1f,0x1c,0x7c,0x00,0x00,0x00,0x00,0x00,0x17,0x00,0x80,0x3a,0x00,0x00,0xfc,0xff,0x0f,0x06,0x7e,0x00,0x00,0x00,0x00,0x00,0x2e,0x00,0x00,0x75,0x00,0x00,0xfe,0xff,0x07,0x03,0xbf,0x00,0x00,0x00,0x00,0x00,0x54,0x00,0x00,0x6a,0x00,0x00,0xfb,0xff,0x83,0xf1,0x0f,0x00,0x00,0x00,0x00,0x00,0xa8,0x00,0x00,0xd4,0x00,0x00,0xf8,0xff,0xc0,0xf8,0x07,0x00,0x00,0x00,0x00,0x00,0x50,0x01,0x00,0xa8,0x07,0x00,0xf0,0x3f,0x60,0xfe,0x03,0x00,0x00,0x00,0x00,0x00,0xa0,0x02,0x00,0xd0,0x1f,0x00,0xe4,0x0d,0x30,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x05,0x00,0xa0,0x7f,0x00,0xa0,0x00,0x98,0x7f,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x0e,0x00,0x40,0xff,0x01,0x10,0x00,0xcc,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1d,0x00,0x80,0xff,0x0f,0x00,0x00,0xe7,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1a,0x00,0x00,0xf0,0x1f,0x00,0x80,0xf3,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x34,0x00,0x00,0x80,0x3f,0x00,0xc0,0xf9,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x18,0x00,0xe0,0xfc,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x70,0xfe,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x00,0x70,0xfe,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x01,0x00,0x00,0x00,0x00,0x70,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x03,0x00,0x00,0x00,0x00,0xf0,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x00,0x00,0x00,0x00,0xf0,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,0x00,0xe0,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x00,0x00,0x00,0x00,0xc0,0x17,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0x00,0x80,0x2f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x00,0x80,0x47,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x00,0x00,0x00};
static const unsigned char image_Layer_25_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0xf8,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x03,0x00,0x00,0x00};
static const unsigned char image_Layer_26_bits[] U8X8_PROGMEM = {0xc0,0x00,0xa0,0x06,0x90,0x08,0x8e,0x12,0x89,0x14,0x89,0x14,0x89,0x14,0x8e,0x12,0x90,0x08,0xa0,0x06,0xc0,0x00};
static const unsigned char image_Layer_27_bits[] U8X8_PROGMEM = {0x00,0x04,0x00,0x08,0x0f,0x1e,0x10,0x09,0xa0,0x04,0x40,0x00,0xa0,0x04,0x10,0x09,0x0f,0x1e,0x00,0x08,0x00,0x04};
static const unsigned char image_Layer_28_1_bits[] U8X8_PROGMEM = {0x20,0x00,0x40,0x00,0xfe,0x06,0x41,0x08,0x21,0x08,0x01,0x08,0x81,0x08,0x41,0x08,0xe6,0x07,0x40,0x00,0x80,0x00};
static const unsigned char image_Layer_28_bits[] U8X8_PROGMEM = {0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x58,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
static const unsigned char image_Layer_29_1_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x7f,0xf0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x1f,0xfc,0xc7,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0xc0,0x00,0x00,0x00,0x80,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00};
static const unsigned char image_Layer_28_2_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x80,0x10,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xd8,0x16,0x00,0x00,0x00,0x00,0x00,0x00,0xb0,0x4d,0xd2,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x45,0x92,0x04,0x00,0x00,0x00,0x00,0x00,0xe8,0xff,0xff,0x02,0x00,0x00,0x00,0x00,0x00,0x49,0x00,0x40,0x03,0x00,0x00,0x00,0x00,0x00,0x3b,0x00,0x80,0x19,0x00,0x00,0x00,0xf8,0x7f,0x16,0x00,0x00,0x0d,0x00,0x00,0x00,0xfc,0xff,0x0c,0x00,0x00,0x06,0x00,0x00,0x80,0x0f,0xc0,0x0f,0x00,0x00,0x02,0x00,0x00,0xf0,0x00,0x80,0x0f,0x00,0x00,0x3e,0x00,0x00,0x18,0x00,0x00,0x7e,0x00,0x00,0x22,0x00,0x00,0x1f,0x00,0x00,0x78,0x00,0x00,0x1a,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x8e,0x0f,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0xf2,0xf0,0x00,0x00,0x00,0x00,0xc0,0x01,0x00,0x3f,0x80,0x00,0x00,0x00,0x00,0xc0,0x01,0x80,0x1f,0x80,0x01,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x00,0x07,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x00,0x0c,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x00,0x38,0x00,0x00,0x00,0x80,0x01,0x40,0x01,0x00,0x20,0x00,0x00,0x00,0x80,0x01,0x40,0x01,0x00,0x20,0x00,0x00,0x00,0xc0,0x01,0xc0,0x00,0x00,0x38,0x00,0x00,0x00,0xe0,0x01,0x80,0xff,0x1f,0x1e,0x00,0x00,0x00,0xf0,0x00,0x00,0x03,0xf0,0x03,0x00,0x00,0x80,0x3f,0x00,0x80,0x0e,0x00,0x00,0xff,0xff,0xff,0x60,0x00,0xc0,0x09,0x00,0x00,0x00,0x00,0x00,0xb0,0xff,0x3f,0x03,0x00,0x00,0x00,0x00,0x00,0x98,0x99,0x6c,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x8c,0x46,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x84,0x42,0x00,0x00,0x00};
static const unsigned char image_Layer_29_3_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0xfe,0xff,0x00,0x11,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x1f,0x80,0x03,0x0a,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0xe1,0xc3,0x80,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x52,0x80,0xf3,0x20,0xc1,0x03,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x00,0x79,0x40,0x7e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x00,0x3c,0x80,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x1e,0x80,0x03,0x10,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x0f,0xc0,0x80,0x00,0x0e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x40,0x40,0x01,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x60,0x40,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x01,0x20,0x30,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0xe0,0x01,0x20,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xe0,0x20,0x20,0x30,0x06,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0xe0,0x58,0x20,0x40,0x01,0x06,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x88,0x20,0x40,0x01,0x07,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x88,0x20,0x80,0x80,0x07,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x88,0x20,0x00,0xc0,0x07,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x60,0x70,0x60,0x00,0x60,0x03,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0xc0,0x00,0x38,0x83,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x80,0xff,0x8f,0x01,0x00,0x1c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0xfc,0x87,0x00,0x00,0x08,0x00,0x20,0x20,0x00,0x02,0x00,0x01,0x00,0x80,0x03,0x00,0x80,0xc8,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x20,0x08,0x07,0x00,0x40,0x48,0x10,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x70,0x00,0x0e,0x00,0x80,0x64,0x38,0x00,0x00,0x80,0x00,0x00,0x10,0x00,0x00,0x00,0x20,0x00,0x1c,0x00,0x00,0x33,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x00,0x00,0x1c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x18,0x00,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x25,0x80,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x7f,0xf0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfc,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08};
static const unsigned char image_Layer_29_2_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x05,0x00,0x00,0x80,0x03,0x00,0x00,0x80,0x08,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x1c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x1c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x05,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x98,0x00,0x00,0x00,0x90,0x01,0x02,0x00,0x32,0x00,0x13,0x40,0x26,0x00,0x99,0xc8,0x08,0x00,0x8a,0x99,0x01,0x00,0x00,0x10,0x00,0x00};
static const unsigned char image_Layer_29_bits[] U8X8_PROGMEM = {0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
static const unsigned char image_Layer_30_bits[] U8X8_PROGMEM = {0x01};
static const unsigned char image_Layer_31_bits[] U8X8_PROGMEM = {0x00,0x1f,0x00,0x00,0x00,0x80,0x7f,0x00,0x00,0x00,0xc0,0xff,0x00,0x00,0x00,0xc0,0xff,0x03,0x00,0x00,0xf0,0xff,0x67,0x00,0x00,0xf8,0xff,0xff,0x00,0x00,0xfc,0xff,0xff,0x03,0x00,0xfc,0xff,0xff,0x07,0x00,0xfc,0xff,0xff,0x03,0x00,0xf8,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x78,0x60,0x20,0x03,0xe0,0xfc,0xf9,0xf8,0x07,0xf0,0xff,0x73,0xfc,0x1f,0xf8,0xff,0x07,0xfe,0x3f,0xfe,0xff,0x07,0xff,0x3f,0xfe,0xff,0x03,0xfe,0x1f,0xfc,0xcf,0x01,0x00,0x00,0xf0,0x03,0x00};
static const unsigned char image_Layer_32_bits[] U8X8_PROGMEM = {0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08};
static const unsigned char image_Layer_6_bits[] U8X8_PROGMEM = {0x80,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x80,0x0e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x00,0xc0,0x0e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x01,0x40,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x01,0xc0,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x60,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x30,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x10,0x10,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x0e,0x10,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x40,0x02,0x08,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
static const unsigned char image_Layer_6_copy_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xb0,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xb0,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x09,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x09,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x3c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02};
static const unsigned char image_music_fast_backward_bits[] U8X8_PROGMEM = {0x80,0x00,0x01,0xc0,0x80,0x01,0xb0,0x60,0x01,0x8c,0x18,0x01,0x83,0x06,0x01,0x8c,0x18,0x01,0xb0,0x60,0x01,0xc0,0x80,0x01,0x80,0x00,0x01};
static const unsigned char image_Layer_33_bits[] U8X8_PROGMEM = {0x1c,0x22,0x22,0x70,0x22,0x07,0x22,0x22,0x1c};
static const unsigned char image_Layer_34_bits[] U8X8_PROGMEM = {0x40,0xf7,0x5c,0x08,0x5c,0xf7,0x40};
static const unsigned char image_Layer_35_bits[] U8X8_PROGMEM = {0xb0,0x01,0x28,0x02,0xa6,0x04,0x25,0x05,0x25,0x05,0xa6,0x04,0x28,0x02,0xb0,0x01};


 // Functions that are going to be //
//      utlized in tasks          //

//function that draws the system UI
void systemUI(void *placeholder){

  while(true){

  getTime(); //call the function to retrieve current time

  //logic to detect if it's AM or PM

  if(hour >= 12){ //if the current hour (based on 24 hour system is >=12) set the clock to PM
    AMorPM = "PM";

  }

  else{ 
    //if the current hour (based on 24 hour system) is < 12 set the clock to AM
    AMorPM = "AM";

  }

  //Calculations for current time of song//
    
  minuteCoversion = convertedSongTime / 60; //calculates current minute
  secondConversion =  convertedSongTime % 60; //give us number of seconds past minute

  //Display changing values of song time//

  sprintf(screenTime, "%02d:%02d",minuteCoversion,secondConversion);   // pass in the length in chareecters along with insertion of numbers with variables

  
  //Display changing values of time of day //

  sprintf(timeOfDay,"%02d:%02d:%02d",convertedHour,minutes,seconds); //format the passed in variables

  sprintf(amOrPM, "%s",AMorPM);


  //Display current date

  sprintf(currentDate,"%02d/%02d/%02d",month,day,year); //format the passed in variables

  //Display current track number on screen

  sprintf(currentTrackNum,"Track %04d",totalTracks); //format the passed in variables (to Track ----) 4 digit numbers //totalTracks

  sprintf(totalTrackNum,"/%04d",currentTrackNumber); //format the passed in variables (to / ----) 4 digit numbers


  // This is where all the graphics and drawing occurs //
    
  u8g2.firstPage(); //start at the top of the first page
  
  do{

    drawMP3UIMain(); //function calling to draw UI

    //This uses the 2D array we delcared earlier, it access the current item row and each column of that row
    //and draws the selection frame based on the current item

  if(!volToggle){ //if volume toggle is not true allow for the drawing of reference frames of icons and icons themselves

    u8g2.drawXBMP(110, 55, 13, 11, image_Layer_26_bits);
    u8g2.drawXBMP(110, 39, 13, 11, image_Layer_27_bits);
    u8g2.drawXBMP(111, 23, 12, 11, image_Layer_28_1_bits);

    u8g2.drawFrame(selectFrame[selectedItem][0],
                   selectFrame[selectedItem][1],
                   selectFrame[selectedItem][2],
                   selectFrame[selectedItem][3]);

   }



  }while(u8g2.nextPage()); //continue drawing chunk by chunk

  vTaskDelay(40 / portTICK_PERIOD_MS); //re run the function every 40ms so it isnt constantly running

  }

}

//function that handles user input on the device
void userInput(void *placeholder){

  while(true){

    //*******************************************************************//
   //    Logic that ignores invalid readings for status of MP3 Player   //
  //*******************************************************************//

  readDFPlayer = myDFPlayer.readType(); //read the current status of the MP3 Player
  delay(20);

  if(readDFPlayer >= 0 && readDFPlayer <= 7){ //only valid readings are 0-7

      currentEvent = readDFPlayer;  

  }


  else{ //all other readings are invalid and set it to first reading

      currentEvent = 0;  

  }


  tempTrack = myDFPlayer.readCurrentFileNumber(); //gets current track and stores it in variable for display use
  delay(20);


  if (tempTrack > 0){

    currentTrackNumber = tempTrack;

  }

  tempTotal = myDFPlayer.readFileCounts(); //gets amount of tracks on sd card and displays those
  delay(20);


   if (tempTotal > 0){

    totalTracks = tempTotal;

  }


  // Read button Pins constantly to detect any pushes
  buttonOneStatus = digitalRead(buttonOnePin);
  buttonTwoStatus = digitalRead(buttonTwoPin);
  buttonThreeStatus  = digitalRead(buttonThreePin);



//*****************************************************//
//    Logic that plays next song after finishing one   //
//*****************************************************//

  if(loopToggle == false){
      
      if (currentEvent == DFPlayerPlayFinished){ //says if DFPlayer tells me that the song just finished play the next song in line

        myDFPlayer.next();
        songStartTime = millis(); //as soon as new song is started the counter for song time is reset

      }

    }

  //If the song has started activate this
  
  if(playStatus){
    
    currentSongTime = millis() - songStartTime; //This calculates exactly how long the song has been playing in ms
    convertedSongTime = currentSongTime / 1000; // Converts ms to s

  }

//*****************************************************************************************//
//    this condition ensures that items can only be switched while not adjusting volume    //
//*****************************************************************************************//

  if(!volToggle){ // this condition eures that items can only be switched while not adjusting volume

  selectedItemPrevious = selectedItem - 1; //calculated previous item thats selected

  if (selectedItemPrevious < 0){  //if current item is < 0 (out of bounds) jump to last item
    
    selectedItemPrevious = numItems - 1;

  }

  selectedItemNext = selectedItem + 1; //calculates next item

  if (selectedItemNext > numItems){ //if item selected next is out of bounds (> 4) then jump to first item

    selectedItemNext = 0;

  }

  // Logic for menu interactions with buttons //

  //Handles logic for left push button (move left on screen)

   if (buttonOneStatus == 0 && buttonLeftClicked == 0){

    selectedItem -= 1; //decriment each time to give moving action
    buttonLeftClicked = 1;

    if (selectedItem < 0){
      selectedItem = numItems - 1; //if it goes out of bounds make it wrap around to last item
    }

  }

  //So Buttons don't skip over options on menu, limit each click to 1 choice
  //if button left is idle leave click status at 1 (not clicked)
  
  if (buttonOneStatus == 1 && buttonLeftClicked == 1){

    buttonLeftClicked = 0;

  }



  //Handles logic for right push button (move right on screen)

  if (buttonThreeStatus == 0 && buttonRightClicked == 0){

    selectedItem += 1; //incriment each time to give moving action
    buttonRightClicked = 1;

    if (selectedItem >= numItems){
      selectedItem = 0; //if it goes out of bounds make it wrap around back to first item
    }

  }

  //So Buttons don't skip over options on menu, limit each click to 1 choice
  //if button right is idle leave click status at 1 (not clicked)
  
  if (buttonThreeStatus == 1 && buttonRightClicked == 1){

    buttonRightClicked = 0;

  }


}

  if (selectedItem == 0 && buttonTwoStatus == 0){ // if on the rewind button allow for rewinding of song at press of select button

      myDFPlayer.previous();

      songStartTime = millis(); //as soon as song is rewinded start the counter for song time

  }


  if (selectedItem == 1 && buttonTwoStatus == 0){ //if on the pause button and select is clicked

    if(playStatus /*is true*/){ //check if current play status is true and is so pause

        myDFPlayer.pause();
        playStatus = false;

        timeAfterPause = millis() - songStartTime; //This recalculates exactly how long the song has been playing after pause
        
        convertedSongTime = timeAfterPause / 1000; // Converts ms to s


    }

    
    else{ //if current play status is false (not playing anything)


      myDFPlayer.start(); //unpause the song

      playStatus = true;
      
      songStartTime = millis() - timeAfterPause; //adds the time of the song before it was paused "resume timer
  
      
      }
     
  }


  if(selectedItem == 2 && buttonTwoStatus == 0){ // if on the foward button allow for skipping of song

      myDFPlayer.next();    

      songStartTime = millis(); //as soon as song is rewinded start the counter for song time5

  }


//*************************************************//
//           Loop One Song toggle control          //
//*************************************************//

if(buttonTwoStatus == 0){ // loop toggle logic
  if(!loopToggle){
    if(selectedItem == 5){  //if initial state of loop mode it false set it to true upon select
      loopToggle = true;
    }

  }else if(loopToggle){
    if(selectedItem ==5){
    if(buttonTwoStatus == 0){ //if looping is toggled already and you press select on it, itll disactivate looping songs.
      loopToggle = false;
    }
  }
  }
  
}

//*************************************************//
//    Loop One Song feature on MP3 Player Logic    //
//*************************************************//


if(loopToggle == true){ // says if loop is toggled, loop the songs

   if (currentEvent == DFPlayerPlayFinished){ //says if DFPlayer tells me that the song just finished play the next song in line

    myDFPlayer.play(totalTracks);

    songStartTime = millis(); //as soon as song is rewinded start the counter for song time

  }
  
}

//*************************************************//
//    Toggle Control Logic for Shuffle Mode        //
//*************************************************//


if(buttonTwoStatus == 0){ // toggling logic for shuffle function
  if(!shuffleToggle){
    if(selectedItem == 4) //if initial state of shuffle mode it false set it to true upon select

    shuffleToggle = true; // setting true

  }
  
  else if(shuffleToggle){ 
    if(selectedItem == 4){

    if(buttonTwoStatus == 0){ // _---if its toggled and u press select again, it untoggles it (disactivates shuffle mode)
      shuffleToggle = false;
    }
  }
  }
  
}

//*************************************************//
//    Shuffle Songs feature on MP3 Player Logic    //
//*************************************************//

// trouble shoot the fact that it sometimes plays one and skips another // 
// IDK what it is but it acts funny on some occasions //

if (shuffleToggle){ //if the user wants to shuffle the music

  if (currentEvent == DFPlayerPlayFinished){ //says if DFPlayer tells me that the song just finished play the next song in line

    rewindTrack = randomTrack; //this variable acts a memory var so user can remember last track played

    lastRandomTrack = randomTrack; //save the last track for comparison before generating a new one

    randomTrack = random(currentTrackNumber) + 1; //if the current song ends generate a new random song and play it


      if (randomTrack == lastRandomTrack){  //if the previously saved track is the same as the newly generated one, generate a new one

        randomTrack = random(currentTrackNumber) + 1;

      }


    //delay(100); //give it a small delay so random track can be loaded with enough time

    myDFPlayer.play(randomTrack);

    songStartTime = millis(); //as soon as new song begins playing start the counter for song time

  }

  else if(selectedItem == 2 && buttonTwoStatus == 0){ //if you skip the song play another random track

    rewindTrack = randomTrack; //this variable acts a memory var so user can remember last track played


    lastRandomTrack = randomTrack; //save the last track for comparison before generating a new one

    randomTrack = random(currentTrackNumber) + 1;


      if (randomTrack == lastRandomTrack){  //if the previously saved track is the same as the newly generated one, generate a new one

        randomTrack = random(currentTrackNumber) + 1;

      }
    

    //delay(50);

    myDFPlayer.play(randomTrack);

    songStartTime = millis(); //as soon as new song begins playing start the counter for song time

  }
  

  else if(selectedItem == 0 && buttonTwoStatus == 0){ //if you go to previous song play another random track

    myDFPlayer.play(rewindTrack);

    randomTrack = rewindTrack; //update the current random track 

    //delay(50);

    songStartTime = millis(); //as soon as new song begins playing start the counter for song time

  }
  

}


//*************************************************//
//    Toggle Control Logic for Volume  Mode        //
//    Volume Increase and Decrease On MP3          //
//*************************************************//

  if(buttonTwoStatus == 0){   // this statement is purely for toggling

    if(!volToggle){
      
        if(selectedItem == 3){

          volToggle = true;
        
      }
    
    }
    
  else if(volToggle){

      if(buttonTwoStatus == 0){

        volToggle = false;

      }
    }
  
  } 

  if(buttonThreeStatus == 0){ // this one and button three status below it control volume 
    
    if(volToggle){
      volume++;
      barHeight += 1.2;
      if(volume <= 0){
        volume = 0;
      }

      if (barHeight >= 39){
        barHeight = 39;
      }
      myDFPlayer.volume(volume);
    }
    else{

    }
  }

  if(buttonOneStatus == 0){
    if(volToggle){
      volume--;
      barHeight -= 1.2;
      if(volume > 30){
        volume = 30;
      }

      if (barHeight < 0){
        barHeight = 0;
      }
      myDFPlayer.volume(volume);
    }
  }


  vTaskDelay(35 / portTICK_PERIOD_MS); //re run the function every 40ms so it isnt constantly running

  }

}



void setup(){

  FPSerial.begin(9600, SERIAL_8N1, /*rx =*/RX, /*tx =*/TX);
  Serial.begin(115200);

  delay(1000);
  
  // Check condition of df player to see if everything works fine and connects //
  
  if (!myDFPlayer.begin(FPSerial, /*isACK = */true, /*doReset = */true)) {

    Serial.println(F("Unable to begin:"));
    Serial.println(F("1.Please recheck the connection!"));
    Serial.println(F("2.Please insert the SD card!"));
   
  }

  else{

    Serial.println(F("DFPlayer Mini online."));
    
  }
  
  u8g2.begin(); //start the graphics library
  u8g2.setContrast(200); //set the brightness of the screen

  realTimeClock.begin(); //initializes the real time clock module
  //realTimeClock.adjust(DateTime(2025,12,31,15,39,40)); //sets time of module to July 18,2025 and 12:13:15 PM [setting time is based on 24 hours system] (upload once then comment out so RTC module keeps track of time)


  delay(500); //give everything time to power up

  u8g2.setFontMode(1);  
  u8g2.setBitmapMode(1);
  
  // Set all buttons to inputs
  pinMode(buttonOnePin,INPUT_PULLUP); //button to move left
  pinMode(buttonTwoPin,INPUT_PULLUP); //button to select
  pinMode(buttonThreePin,INPUT_PULLUP); //button to move right

  bool playStatus = true;
 
  myDFPlayer.EQ(4);


    xTaskCreatePinnedToCore(
    userInput,              //function thats called
    "HandleInput",          //name of task
    3072,                   //Stack size (allocated system memory to handle task)
    NULL,                   //parameter for function
    1,                      //Task Priority 0-24 (0 lowest priority & 24 highest priority)
    NULL,                   // Task handler
    app_cpu                 //Run Task on core selected in beginning of program

  );


  xTaskCreatePinnedToCore(
    systemUI,           
    "DrawSystemUI",
    5120,
    NULL,
    2,
    NULL,
    app_cpu

  );
  

}

void loop()
{

  // Loop is empty | freeRTOS controls how often each task is run so loop //
  //                        is no longer needed                           //

}


//*************************************************//
//    Function that handles the rending of the     //
//        Menu screen of the MP3 Player            //
//*************************************************//


void drawMP3UIMain(){


  if(shuffleToggle && !loopToggle){ //if shuffle feature is the only the mode toggled on

      u8g2.drawXBMP(5, 32, 8, 7, image_Layer_34_bits); //draws icon for shuffling so user knows

  }

  if(loopToggle && !shuffleToggle){ //if loop feature is the only the mode toggled on

    u8g2.drawXBMP(6, 32, 7, 9, image_Layer_33_bits); //draws icon for looping so user knows


  }

  if (shuffleToggle && loopToggle){ //alter icon placing if both modes are toggled

    u8g2.drawXBMP(5, 43, 8, 7, image_Layer_34_bits);
    u8g2.drawXBMP(6, 32, 7, 9, image_Layer_33_bits); //draws symbol for looping so user knows

  }
  

  if (volToggle){

    if(volume > 30){
      volume = 30;
    }

    else if(volume <= 0){
      volume = 0;
    }
    
  sprintf(currentVolume,"%02d",volume); //formats the passed in volume in double digits


  u8g2.drawFrame(115, 28, 7, 39); //Outline for volume box
  u8g2.drawXBMP(113, 68, 11, 8, image_Layer_35_bits); //mini Volume Icon

  u8g2.setFont(u8g2_font_4x6_tr);
  u8g2.drawStr(115, 27, currentVolume);  
  
  
  u8g2.setDrawColor(0); //draw the black background of the volume box

  u8g2.drawBox(116, 29, 5, 3);

  u8g2.setDrawColor(1); //draw the white filling of the volume box
    
  u8g2.drawBox(115, 67 - barHeight, 7, barHeight); //This is the "filling" of the volume flipped because the bar is being filled vertically

  }

  u8g2.drawFrame(0, 0, 128, 128);

  u8g2.drawXBMP(3, 91, 109, 35, image_Layer_6_bits);

  u8g2.drawEllipse(63, 118, 5, 5);

  u8g2.drawFrame(61, 117, 4, 4);

  u8g2.drawXBMP(8, 93, 120, 35, image_Layer_6_copy_bits);

  u8g2.drawXBMP(83, 111, 17, 16, image_download_bits);

  u8g2.drawFrame(1, 1, 126, 126);

  u8g2.drawXBMP(0, 41, 126, 55, image_Layer_13_bits);

  u8g2.drawXBMP(0, 0, 0, 0, image_Layer_1_bits);

  u8g2.drawXBMP(21, 102, 104, 8, image_Layer_25_bits);

  u8g2.setFont(u8g2_font_6x10_tr);
  u8g2.drawStr(63, 11, timeOfDay);

  u8g2.drawStr(113, 11, amOrPM);


  u8g2.drawXBMP(0, 0, 0, 0, image_Layer_1_bits);


  u8g2.setFont(u8g2_font_5x8_tr);
  u8g2.drawStr(75, 20, currentDate);

  u8g2.drawXBMP(0, 0, 0, 0, image_Layer_1_bits);

  u8g2.drawXBMP(3, 102, 123, 19, image_Layer_28_bits);

  u8g2.drawXBMP(0, 101, 126, 3, image_Layer_29_bits);

  u8g2.drawXBMP(27, 114, 17, 9, image_music_fast_backward_bits);

  u8g2.drawXBMP(2, 95, 124, 13, image_Layer_29_1_bits);

  u8g2.setFont(u8g2_font_6x10_tr);
  u8g2.drawStr(14, 40, currentTrackNum);

  u8g2.drawStr(72, 45, totalTrackNum); 

  //u8g2.drawStr(72, 45, currentTrackNum); 

  u8g2.drawXBMP(0, 0, 0, 0, image_Layer_1_bits);

  u8g2.drawXBMP(2, 77, 124, 9, image_Layer_32_bits);

  u8g2.setFont(u8g2_font_6x12_tr);
  u8g2.drawStr(48, 107, screenTime);

  // Code for dynamic icons //

  if (hour > 5 && hour <= 14){ //morning icon

    u8g2.drawEllipse(11, 12, 16, 16);

    u8g2.drawXBMP(2, 2, 30, 30, image_Layer_29_2_bits);

    u8g2.drawXBMP(33, 4, 40, 18, image_Layer_31_bits);

  }
  
  else if (hour >14 && hour <19){ //afternoon icon

    u8g2.drawXBMP(1, 1, 70, 31, image_Layer_28_2_bits);

  }

  else{ //night icon

    u8g2.drawXBMP(3, 2, 124, 70, image_Layer_29_3_bits);

  }


}


//Make a function from time and date , get previous code from other project

//function that retrieves the current time and date
int getTime(){

  
  DateTime information = realTimeClock.now(); //retreives current time from rtc module and stores it into information object

  //retrieves and stores necessary imformation from information object using built in functions from RTC library
  year = information.year();
  month = information.month();
  day = information.day();
  hour = information.hour();
  minutes = information.minute();
  seconds = information.second();

  if (hour > 12){ //converts the hour from the 24 hour system to a 12 the 12 hour system and stores it into variable
      convertedHour = (hour - 12);
    }

  else if(hour == 12){ //special case when the clock hits the 12'th hour meaning it's 12pm
      convertedHour = 12;
    }


  else{ //if the current hour (based on 24 hour system) is < 12 set the clock to AM

    if (hour == 0){ //converts the 24 hour system of 0:00:00 to 12 hour system (12:00 AM)
      convertedHour = 12;
    }

    else{ //if given hour is in between 0 and 12 just leave it as is
      convertedHour = hour;
    }

  }

  
  return(year,month,day,convertedHour,minutes,seconds);

}